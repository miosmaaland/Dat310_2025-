{"ast":null,"code":"export default {\n  name: \"UserProfile\",\n  data() {\n    return {\n      username: localStorage.getItem('username') || 'Guest',\n      score: 0,\n      profileImage: \"/default.jpg\",\n      showBackToTop: false,\n      selectedFile: null,\n      uploadError: \"\",\n      achievements: []\n    };\n  },\n  computed: {\n    isLoggedIn() {\n      return !!localStorage.getItem(\"user_id\");\n    }\n  },\n  methods: {\n    logout() {\n      fetch('/api/logout', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }).then(res => res.json()).then(() => {\n        localStorage.removeItem('user_id');\n        localStorage.removeItem('username');\n        this.$router.push('/');\n      }).catch(() => {\n        alert('Logout failed. Please try again.');\n      });\n    },\n    scrollToTop() {\n      window.scrollTo({\n        top: 0,\n        behavior: 'smooth'\n      });\n    },\n    handleScroll() {\n      this.showBackToTop = window.scrollY > 200;\n    },\n    onFileChange(e) {\n      this.selectedFile = e.target.files[0];\n      this.uploadError = \"\";\n    },\n    uploadImage() {\n      if (!this.selectedFile) return;\n      const formData = new FormData();\n      formData.append('image', this.selectedFile);\n      fetch('/api/user/profile_image', {\n        method: 'POST',\n        credentials: 'include',\n        body: formData\n      }).then(res => res.json()).then(data => {\n        if (data.success) {\n          this.profileImage = 'http://localhost:5001' + data.profile_image + '?t=' + Date.now();\n          this.selectedFile = null;\n          this.uploadError = \"\";\n        } else {\n          this.uploadError = data.error || \"Upload failed.\";\n        }\n      }).catch(() => {\n        this.uploadError = \"Upload failed. Try again.\";\n      });\n    },\n    fetchProfileImage() {\n      fetch('/api/user/profile_image', {\n        credentials: 'include'\n      }).then(res => res.json()).then(data => {\n        if (data.profile_image) {\n          this.profileImage = 'http://localhost:5001' + data.profile_image + '?t=' + Date.now();\n        }\n      });\n    },\n    fetchAchievements() {\n      fetch('/api/user/achievements', {\n        credentials: 'include'\n      }).then(res => res.json()).then(data => {\n        if (Array.isArray(data)) {\n          this.achievements = data;\n        }\n      });\n    }\n  },\n  mounted() {\n    window.addEventListener('scroll', this.handleScroll);\n    fetch('/api/leaderboard').then(res => res.json()).then(data => {\n      const user = data.find(u => u.username === this.username);\n      if (user) {\n        this.score = user.score;\n      }\n    }).catch(() => {\n      this.score = 0;\n    });\n    this.fetchProfileImage();\n    this.fetchAchievements();\n  },\n  beforeUnmount() {\n    window.removeEventListener('scroll', this.handleScroll);\n  }\n};","map":{"version":3,"names":["name","data","username","localStorage","getItem","score","profileImage","showBackToTop","selectedFile","uploadError","achievements","computed","isLoggedIn","methods","logout","fetch","method","headers","then","res","json","removeItem","$router","push","catch","alert","scrollToTop","window","scrollTo","top","behavior","handleScroll","scrollY","onFileChange","e","target","files","uploadImage","formData","FormData","append","credentials","body","success","profile_image","Date","now","error","fetchProfileImage","fetchAchievements","Array","isArray","mounted","addEventListener","user","find","u","beforeUnmount","removeEventListener"],"sources":["/Users/miosmaland/Skole/Dat310/san/cs-quiz-master/frontend/src/components/Profile.vue"],"sourcesContent":["<template>\n  <main>\n    <!-- Navbar -->\n    <nav class=\"navbar navbar-expand-lg navbar-dark bg-dark\" aria-label=\"Main navigation\">\n      <div class=\"container\">\n        <router-link class=\"navbar-brand\" to=\"/\">CS Quiz Master</router-link>\n        <button\n          class=\"navbar-toggler\"\n          type=\"button\"\n          data-bs-toggle=\"collapse\"\n          data-bs-target=\"#navbarNav\"\n          aria-controls=\"navbarNav\"\n          aria-expanded=\"false\"\n          aria-label=\"Toggle navigation\"\n        >\n          <span class=\"navbar-toggler-icon\"></span>\n        </button>\n        <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\n          <ul class=\"navbar-nav ms-auto\">\n            <li class=\"nav-item\">\n              <router-link class=\"nav-link\" to=\"/\">Home</router-link>\n            </li>\n            <li class=\"nav-item\">\n              <router-link class=\"nav-link\" to=\"/play\">Play</router-link>\n            </li>\n            <li class=\"nav-item\">\n              <router-link class=\"nav-link\" to=\"/leaderboard\">Leaderboard</router-link>\n            </li>\n            <li class=\"nav-item\">\n              <router-link class=\"nav-link\" to=\"/hangman\">Hangman</router-link>\n            </li>\n            <li class=\"nav-item\" v-if=\"isLoggedIn\">\n              <button class=\"nav-link btn btn-danger\" @click=\"logout\" aria-label=\"Logout\">Logout</button>\n            </li>\n          </ul>\n        </div>\n      </div>\n    </nav>\n\n\n    <section class=\"hero-section d-flex flex-column justify-content-center align-items-center text-center py-5 mb-4\">\n  <div class=\"hero-icon mb-3\">\n    <span style=\"font-size: 3rem;\">ðŸ‘¤</span>\n  </div>\n  <h1 class=\"display-5 fw-bold text-white\">Your Profile</h1>\n  <p class=\"lead text-white-50 mb-0\">View your stats and achievements!</p>\n</section>\n\n    <!-- Profile Section -->\n    <section class=\"container mt-5 text-center\">\n      <div class=\"d-flex flex-column align-items-center mb-4\">\n        <img\n          :src=\"profileImage\"\n          alt=\"Profile\"\n          class=\"rounded-circle shadow\"\n          style=\"width: 100px; height: 100px; object-fit: cover;\"\n        />\n        <form @submit.prevent=\"uploadImage\" class=\"mt-3\" enctype=\"multipart/form-data\">\n          <input type=\"file\" accept=\"image/*\" @change=\"onFileChange\" class=\"form-control mb-2\" />\n          <button v-if=\"selectedFile\" class=\"btn btn-secondary btn-sm\" type=\"submit\">Upload Image</button>\n        </form>\n        <div v-if=\"uploadError\" class=\"text-danger mt-2\">{{ uploadError }}</div>\n      </div>\n      <h1>Hello, {{ username }}! ðŸ‘‹</h1>\n      <p>Your Current Score: {{ score }}</p>\n      <nav class=\"d-flex flex-column flex-md-row justify-content-center gap-3 mt-4\">\n        <router-link class=\"btn btn-primary\" to=\"/play\">Take More Quizzes</router-link>\n        <button class=\"btn btn-danger\" @click=\"logout\">Logout</button>\n      </nav>\n      <!-- Achievements Section -->\n      <div class=\"mt-4\">\n        <h3>Achievements</h3>\n        <div v-if=\"achievements.length === 0\" class=\"text-muted\">No achievements yet.</div>\n        <ul class=\"list-group list-group-flush d-inline-block text-start\" style=\"max-width: 400px;\">\n          <li v-for=\"ach in achievements\" :key=\"ach.id\" class=\"list-group-item\">\n            <strong>{{ ach.name }}</strong>\n            <div class=\"small text-muted\">{{ ach.description }}</div>\n          </li>\n        </ul>\n      </div>\n    </section>\n\n    <!-- Floating Back to Top Button -->\n    <button\n      v-show=\"showBackToTop\"\n      @click=\"scrollToTop\"\n      class=\"btn btn-primary position-fixed\"\n      style=\"bottom: 30px; right: 30px; z-index: 1000;\"\n      aria-label=\"Back to top\"\n    >\n      â†‘ Top\n    </button>\n  </main>\n</template>\n\n<script>\nexport default {\n  name: \"UserProfile\",\n  data() {\n    return {\n      username: localStorage.getItem('username') || 'Guest',\n      score: 0,\n      profileImage: \"/default.jpg\",\n      showBackToTop: false,\n      selectedFile: null,\n      uploadError: \"\",\n      achievements: [],\n    };\n  },\n  computed: {\n    isLoggedIn() {\n      return !!localStorage.getItem(\"user_id\");\n    }\n  },\n  methods: {\n    logout() {\n      fetch('/api/logout', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n      })\n        .then((res) => res.json())\n        .then(() => {\n          localStorage.removeItem('user_id');\n          localStorage.removeItem('username');\n          this.$router.push('/');\n        })\n        .catch(() => {\n          alert('Logout failed. Please try again.');\n        });\n    },\n    scrollToTop() {\n      window.scrollTo({ top: 0, behavior: 'smooth' });\n    },\n    handleScroll() {\n      this.showBackToTop = window.scrollY > 200;\n    },\n    onFileChange(e) {\n      this.selectedFile = e.target.files[0];\n      this.uploadError = \"\";\n    },\n    uploadImage() {\n      if (!this.selectedFile) return;\n      const formData = new FormData();\n      formData.append('image', this.selectedFile);\n      fetch('/api/user/profile_image', {\n        method: 'POST',\n        credentials: 'include',\n        body: formData,\n      })\n        .then(res => res.json())\n        .then(data => {\n          if (data.success) {\n            this.profileImage = 'http://localhost:5001' + data.profile_image + '?t=' + Date.now();\n            this.selectedFile = null;\n            this.uploadError = \"\";\n          } else {\n            this.uploadError = data.error || \"Upload failed.\";\n          }\n        })\n        .catch(() => {\n          this.uploadError = \"Upload failed. Try again.\";\n        });\n    },\n    fetchProfileImage() {\n      fetch('/api/user/profile_image', { credentials: 'include' })\n        .then(res => res.json())\n        .then(data => {\n          if (data.profile_image) {\n            this.profileImage = 'http://localhost:5001' + data.profile_image + '?t=' + Date.now();\n          }\n        });\n    },\n    fetchAchievements() {\n      fetch('/api/user/achievements', { credentials: 'include' })\n        .then(res => res.json())\n        .then(data => {\n          if (Array.isArray(data)) {\n            this.achievements = data;\n          }\n        });\n    },\n  },\n  mounted() {\n    window.addEventListener('scroll', this.handleScroll);\n    fetch('/api/leaderboard')\n      .then((res) => res.json())\n      .then((data) => {\n        const user = data.find((u) => u.username === this.username);\n        if (user) {\n          this.score = user.score;\n        }\n      })\n      .catch(() => {\n        this.score = 0;\n      });\n    this.fetchProfileImage();\n    this.fetchAchievements();\n  },\n  beforeUnmount() {\n    window.removeEventListener('scroll', this.handleScroll);\n  }\n};\n</script>\n\n<style>\n.hero-section {\n  background: linear-gradient(120deg, #20c997 0%, #007bff 100%);\n  min-height: 220px;\n  border-radius: 0 0 2rem 2rem;\n  box-shadow: 0 4px 24px rgba(0,0,0,0.08);\n}\n.hero-icon {\n  filter: drop-shadow(0 2px 8px rgba(0,0,0,0.15));\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}