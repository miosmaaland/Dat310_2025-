{"ast":null,"code":"export default {\n  name: \"QuizPlay\",\n  data() {\n    return {\n      categories: [],\n      category: \"\",\n      level: \"\",\n      question: null,\n      score: 0,\n      message: '',\n      correctAnswer: null,\n      loading: false\n    };\n  },\n  methods: {\n    fetchCategories() {\n      fetch('/api/categories').then(res => res.json()).then(data => {\n        this.categories = data;\n      });\n    },\n    fetchScore() {\n      fetch('/api/leaderboard').then(res => res.json()).then(data => {\n        const username = localStorage.getItem('username');\n        const user = data.find(u => u.username === username);\n        if (user) this.score = user.score;\n      });\n    },\n    fetchQuestion() {\n      this.loading = true;\n      let url = '/api/question';\n      const params = [];\n      if (this.category) params.push(`category=${encodeURIComponent(this.category)}`);\n      if (this.level) params.push(`level=${encodeURIComponent(this.level)}`);\n      if (params.length) url += '?' + params.join('&');\n      fetch(url).then(res => res.json()).then(data => {\n        if (!data.error) {\n          this.question = data;\n          this.message = '';\n          this.correctAnswer = null;\n        } else {\n          this.question = null;\n          this.message = data.error;\n        }\n        this.loading = false;\n      }).catch(() => {\n        this.message = 'Failed to load question.';\n        this.loading = false;\n      });\n    },\n    submitAnswer(key) {\n      if (this.loading) return;\n      this.loading = true;\n      const answerText = this.question.options[key];\n      fetch('/api/answer', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        credentials: 'include',\n        body: JSON.stringify({\n          question_id: this.question.id,\n          answer: answerText\n        })\n      }).then(res => res.json()).then(data => {\n        this.correctAnswer = data.correct;\n        if (data.correct) {\n          this.message = 'Correct! +10 points';\n        } else {\n          this.message = data.correct_answer ? `Wrong! The correct answer was ${data.correct_answer}` : 'Wrong! (No correct answer found)';\n        }\n        this.fetchScore();\n        setTimeout(() => {\n          this.fetchQuestion();\n          this.message = '';\n          this.correctAnswer = null;\n        }, 1000);\n      }).finally(() => {\n        this.loading = false;\n      });\n    },\n    skipQuestion() {\n      if (this.loading) return;\n      this.loading = true;\n      fetch('/api/skip', {\n        method: 'POST'\n      }).then(res => res.json()).then(data => {\n        if (data.success) {\n          this.message = 'Question skipped. -5 points';\n          this.fetchScore();\n          setTimeout(() => {\n            this.fetchQuestion();\n          }, 800);\n        } else {\n          this.message = data.error || 'Could not skip the question.';\n        }\n      }).finally(() => {\n        this.loading = false;\n      });\n    },\n    logout() {\n      fetch('/api/logout', {\n        method: 'POST'\n      }).then(() => {\n        localStorage.clear();\n        this.$router.push('/');\n      });\n    }\n  },\n  mounted() {\n    this.fetchCategories();\n    this.fetchScore();\n    this.fetchQuestion();\n  },\n  watch: {\n    category() {\n      this.fetchQuestion();\n    },\n    level() {\n      this.fetchQuestion();\n    }\n  }\n};","map":{"version":3,"names":["name","data","categories","category","level","question","score","message","correctAnswer","loading","methods","fetchCategories","fetch","then","res","json","fetchScore","username","localStorage","getItem","user","find","u","fetchQuestion","url","params","push","encodeURIComponent","length","join","error","catch","submitAnswer","key","answerText","options","method","headers","credentials","body","JSON","stringify","question_id","id","answer","correct","correct_answer","setTimeout","finally","skipQuestion","success","logout","clear","$router","mounted","watch"],"sources":["/Users/miosmaland/Skole/Dat310/san/cs-quiz-master/frontend/src/components/Play.vue"],"sourcesContent":["<template>\n  <div>\n    <nav class=\"navbar navbar-expand-lg navbar-dark bg-dark\">\n      <div class=\"container\">\n        <router-link class=\"navbar-brand\" to=\"/\">CS Quiz Master</router-link>\n        <button\n          class=\"navbar-toggler\"\n          type=\"button\"\n          data-bs-toggle=\"collapse\"\n          data-bs-target=\"#navbarNav\"\n          aria-controls=\"navbarNav\"\n          aria-expanded=\"false\"\n          aria-label=\"Toggle navigation\"\n        >\n          <span class=\"navbar-toggler-icon\"></span>\n        </button>\n        <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\n          <ul class=\"navbar-nav ms-auto\">\n            <li class=\"nav-item\"><router-link class=\"nav-link\" to=\"/\">Home</router-link></li>\n            <li class=\"nav-item\"><router-link class=\"nav-link\" to=\"/profile\">Profile</router-link></li>\n            <li class=\"nav-item\"><router-link class=\"nav-link\" to=\"/leaderboard\">Leaderboard</router-link></li>\n            <li class=\"nav-item\"><router-link class=\"nav-link\" to=\"/hangman\">Hangman</router-link></li>\n            <li class=\"nav-item\">\n              <a class=\"nav-link\" href=\"#\" @click.prevent=\"logout\">Logout</a>\n            </li>\n          </ul>\n        </div>\n      </div>\n    </nav>\n\n    <section class=\"hero-section d-flex flex-column justify-content-center align-items-center text-center py-5 mb-4\">\n      <div class=\"hero-icon mb-3\">\n        <span style=\"font-size: 3rem;\">üíª</span>\n      </div>\n      <h1 class=\"display-5 fw-bold text-white\">Computer Science Challenge</h1>\n      <p class=\"lead text-white-50 mb-0\">Test your knowledge and earn points!</p>\n    </section>\n\n    <div class=\"container mt-4\">\n      <form class=\"row g-3 mb-4\" @submit.prevent=\"fetchQuestion\">\n        <div class=\"col-md-5\">\n          <label for=\"category\" class=\"form-label\">Category</label>\n          <select v-model=\"category\" id=\"category\" class=\"form-select\">\n            <option value=\"\">Any</option>\n            <option v-for=\"cat in categories\" :key=\"cat.id\" :value=\"cat.id\">{{ cat.name }}</option>\n          </select>\n        </div>\n        <div class=\"col-md-5\">\n          <label for=\"level\" class=\"form-label\">Level</label>\n          <select v-model=\"level\" id=\"level\" class=\"form-select\">\n            <option value=\"\">Any</option>\n            <option value=\"1\">Level 1</option>\n            <option value=\"2\">Level 2</option>\n            <option value=\"3\">Level 3</option>\n          </select>\n        </div>\n        <div class=\"col-md-2 d-flex align-items-end\">\n          <button type=\"submit\" class=\"btn btn-primary w-100\">New Question</button>\n        </div>\n      </form>\n      \n\n      <div v-if=\"question\" class=\"card mb-3 shadow\">\n        <div class=\"card-body\">\n          <h5 class=\"card-title\">{{ question.question }}</h5>\n          <div class=\"list-group\">\n            <button\n              v-for=\"(option, key) in question.options\"\n              :key=\"key\"\n              @click=\"submitAnswer(key)\"\n              class=\"list-group-item list-group-item-action\"\n              :disabled=\"loading\"\n            >\n              {{ key }}: {{ option }}\n            </button>\n          </div>\n        </div>\n      </div>\n      <div v-else class=\"text-center text-muted mb-3\">No question loaded.</div>\n\n      <div class=\"mb-3\">\n        <button class=\"btn btn-warning\" @click=\"skipQuestion\" :disabled=\"loading\">\n          ‚è© Skip Question (-5)\n        </button>\n      </div>\n      <p class=\"fs-5\" :class=\"{'text-success': correctAnswer, 'text-danger': correctAnswer === false}\">\n        {{ message }}\n      </p>\n      <div class=\"fs-4\">Score: {{ score }}</div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"QuizPlay\",\n  data() {\n    return {\n      categories: [],\n      category: \"\",\n      level: \"\",\n      question: null,\n      score: 0,\n      message: '',\n      correctAnswer: null,\n      loading: false,\n    };\n  },\n  methods: {\n    fetchCategories() {\n      fetch('/api/categories')\n        .then(res => res.json())\n        .then(data => {\n          this.categories = data;\n        });\n    },\n    fetchScore() {\n      fetch('/api/leaderboard')\n        .then(res => res.json())\n        .then(data => {\n          const username = localStorage.getItem('username');\n          const user = data.find(u => u.username === username);\n          if (user) this.score = user.score;\n        });\n    },\n    fetchQuestion() {\n      this.loading = true;\n      let url = '/api/question';\n      const params = [];\n      if (this.category) params.push(`category=${encodeURIComponent(this.category)}`);\n      if (this.level) params.push(`level=${encodeURIComponent(this.level)}`);\n      if (params.length) url += '?' + params.join('&');\n      fetch(url)\n        .then((res) => res.json())\n        .then((data) => {\n          if (!data.error) {\n            this.question = data;\n            this.message = '';\n            this.correctAnswer = null;\n          } else {\n            this.question = null;\n            this.message = data.error;\n          }\n          this.loading = false;\n        })\n        .catch(() => {\n          this.message = 'Failed to load question.';\n          this.loading = false;\n        });\n    },\n    submitAnswer(key) {\n      if (this.loading) return;\n      this.loading = true;\n      const answerText = this.question.options[key];\n      fetch('/api/answer', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        credentials: 'include',\n        body: JSON.stringify({ question_id: this.question.id, answer: answerText }),\n      })\n        .then((res) => res.json())\n        .then((data) => {\n          this.correctAnswer = data.correct;\n          if (data.correct) {\n            this.message = 'Correct! +10 points';\n          } else {\n            this.message = data.correct_answer\n              ? `Wrong! The correct answer was ${data.correct_answer}`\n              : 'Wrong! (No correct answer found)';\n          }\n          this.fetchScore();\n          setTimeout(() => {\n            this.fetchQuestion();\n            this.message = '';\n            this.correctAnswer = null;\n          }, 1000);\n        })\n        .finally(() => {\n          this.loading = false;\n        });\n    },\n    skipQuestion() {\n      if (this.loading) return;\n      this.loading = true;\n      fetch('/api/skip', { method: 'POST' })\n        .then((res) => res.json())\n        .then((data) => {\n          if (data.success) {\n            this.message = 'Question skipped. -5 points';\n            this.fetchScore();\n            setTimeout(() => {\n              this.fetchQuestion();\n            }, 800);\n          } else {\n            this.message = data.error || 'Could not skip the question.';\n          }\n        })\n        .finally(() => {\n          this.loading = false;\n        });\n    },\n\n    logout() {\n      fetch('/api/logout', { method: 'POST' })\n        .then(() => {\n          localStorage.clear();\n          this.$router.push('/');\n        });\n    },\n  },\n  mounted() {\n    this.fetchCategories();\n    this.fetchScore();\n    this.fetchQuestion();\n  },\n  watch: {\n    category() {\n      this.fetchQuestion();\n    },\n    level() {\n      this.fetchQuestion();\n    }\n  }\n};\n</script>\n\n<style scoped>\n.hero-section {\n  background: linear-gradient(120deg, #fd7e14 0%, #007bff 100%);\n  min-height: 220px;\n  border-radius: 0 0 2rem 2rem;\n  box-shadow: 0 4px 24px rgba(0,0,0,0.08);\n}\n.hero-icon {\n  filter: drop-shadow(0 2px 8px rgba(0,0,0,0.15));\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}